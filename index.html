<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dental AI Receptionist Demo</title>

    <!-- Tailwind for styling -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Vapi SDK -->
    <script src="https://cdn.jsdelivr.net/npm/@vapi-ai/web@latest/dist/vapi.umd.js"></script>
  </head>
  <body class="bg-gray-900 flex items-center justify-center min-h-screen relative">
    <!-- Main Card -->
    <div
      class="bg-gray-800 text-white rounded-2xl shadow-xl p-8 w-full max-w-md text-center"
    >
      <p class="text-gray-300 mb-6">
        Click below to speak with your new AI assistant.
      </p>

      <!-- Call button -->
      <button
        id="call-btn"
        class="bg-blue-600 hover:bg-blue-700 rounded-full p-6 mb-6 transition duration-200"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="h-10 w-10 text-white"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M3 5h2l3.6 7.59-1.35 2.45a1 1 0 00.9 1.5h11a1 1 0 00.9-1.5l-1.35-2.45L19 5h2"
          />
        </svg>
      </button>

      <!-- Card content -->
      <h2 class="text-xl font-bold mb-4">
        AI-Powered Receptionist for Family Dental Care
      </h2>
      <p class="text-gray-400 text-sm mb-6">
        Meet Harry, your new AI Assistant, custom-built for Family Dental Care.
        He provides a warm, professional first impression and handles all
        incoming calls with perfect efficiency.
      </p>

      <ul class="text-left text-gray-300 text-sm space-y-2">
        <li>• Schedule new patient appointments 24/7.</li>
        <li>• Intelligently answer questions about your services.</li>
        <li>• Free up your front desk to focus on in-office patients.</li>
      </ul>

      <!-- Call status updates -->
      <div id="call-status" class="mt-6 text-gray-400 text-sm"></div>
    </div>

    <!-- Floating Call Widget -->
    <button
      id="floating-btn"
      class="fixed bottom-6 right-6 bg-blue-600 hover:bg-blue-700 rounded-full w-16 h-16 flex items-center justify-center shadow-lg transition duration-200"
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        class="h-8 w-8 text-white"
        fill="none"
        viewBox="0 0 24 24"
        stroke="currentColor"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M3 5h2l3.6 7.59-1.35 2.45a1 1 0 00.9 1.5h11a1 1 0 00.9-1.5l-1.35-2.45L19 5h2"
        />
      </svg>
    </button>

    <script>
      function initVapi() {
        if (!window.vapiWeb || !window.vapiWeb.Vapi) {
          console.error("Vapi failed to load.");
          document.getElementById("call-status").innerHTML =
            '<p class="text-red-500 font-medium">Vapi failed to initialize.</p>';
          return;
        }

        const VAPI_PUBLIC_KEY = "ebb2b07d-b81f-43b3-9503-e8523797683d";
        const ASSISTANT_ID = "a62ccb25-e09e-474a-832c-b21b045bcca2";

        const vapi = new window.vapiWeb.Vapi(VAPI_PUBLIC_KEY);

        const callStatus = document.getElementById("call-status");
        const callBtn = document.getElementById("call-btn");
        const floatingBtn = document.getElementById("floating-btn");

        // Shared call function
        async function startCall() {
          callStatus.innerHTML =
            '<p class="text-yellow-400">Connecting to your AI assistant...</p>';
          try {
            await vapi.start(ASSISTANT_ID);
          } catch (err) {
            console.error("Call failed:", err);
            callStatus.innerHTML =
              '<p class="text-red-500">Failed to start the call.</p>';
          }
        }

        callBtn.addEventListener("click", startCall);
        floatingBtn.addEventListener("click", startCall);

        vapi.on("call-started", () => {
          callStatus.innerHTML =
            '<p class="text-green-400">You are now speaking with Harry, the AI Receptionist.</p>';
        });

        vapi.on("call-ended", () => {
          callStatus.innerHTML =
            '<p class="text-gray-400">Call ended. Click above to start again.</p>';
        });

        vapi.on("error", (err) => {
          console.error("Vapi error:", err);
          callStatus.innerHTML =
            '<p class="text-red-500">An error occurred. Please try again.</p>';
        });
      }

      window.addEventListener("DOMContentLoaded", initVapi);
    </script>
  </body>
</html>
